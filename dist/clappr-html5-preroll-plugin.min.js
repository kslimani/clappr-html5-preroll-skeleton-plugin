!function(A,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("clappr")):"function"==typeof define&&define.amd?define(["clappr"],e):"object"==typeof exports?exports.ClapprHtml5PrerollPlugin=e(require("clappr")):A.ClapprHtml5PrerollPlugin=e(A.Clappr)}(this,function(A){return function(A){function e(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return A[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=A,e.c=t,e.p="",e(0)}([function(A,e,t){(function(r){"use strict";function o(A){return A&&A.__esModule?A:{"default":A}}function n(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}function i(A,e){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?A:e}function l(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);A.prototype=Object.create(e&&e.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(A,e):A.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol?"symbol":typeof A},c=function v(A,e,t){null===A&&(A=Function.prototype);var r=Object.getOwnPropertyDescriptor(A,e);if(void 0===r){var o=Object.getPrototypeOf(A);return null===o?void 0:v(o,e,t)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(t)},s=function(){function A(A,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(A,r.key,r)}}return function(e,t,r){return t&&A(e.prototype,t),r&&A(e,r),e}}(),u=t(8),h=t(3),p=o(h),d=t(2),g=t(6),f=o(g),y=t(7),C=o(y),k=t(1),B=o(k),m=function(A){function e(A){n(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,A));return console.log("plugin configuration",t.options.html5PrerollPlugin),t._forceOverlay=t.options.html5PrerollPlugin.forceOverlay===!0,t}return l(e,A),s(e,[{key:"name",get:function(){return"html5-preroll-plugin"}},{key:"attributes",get:function(){return{"class":this.name,"data-preroll":""}}}]),s(e,[{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,u.Events.MEDIACONTROL_CONTAINERCHANGED,this._onMediaControlContainerChanged),this.listenTo(this.core,u.Events.CORE_READY,this._onCoreReady)}},{key:"_onMediaControlContainerChanged",value:function(){this.core.mediaControl.container.$el.append(this.el)}},{key:"_pluginError",value:function(A){throw new Error(this.name+": "+A)}},{key:"_onCoreReady",value:function(){this._container=this.core.getCurrentContainer(),this._container||this._pluginError("Failed to get Clappr current container"),this._playback=this.core.getCurrentPlayback(),this._playback||this._pluginError("Failed to get Clappr playback"),this._posterPlugin=this._container.getPlugin("poster"),this._posterPlugin||this._pluginError("Failed to get Clappr internal poster plugin"),this._clickToPausePlugin=this._container.getPlugin("click_to_pause"),this._clickToPausePlugin||this._pluginError("Failed to get Clappr internal click-to-pause plugin"),this._contentElement=this._playback.el,this._createAdPlayer()}},{key:"_disableControls",value:function(){this.core.disableMediaControl(),this._posterPlugin.disable(),this._clickToPausePlugin.disable(),this._container.stopped(),this._container.stopListening()}},{key:"_enableControls",value:function(){this._container.bindEvents(),this._clickToPausePlugin.enable(),this._posterPlugin.enable(),this.core.enableMediaControl(),this.core.mediaControl.onLoadedMetadataOnVideoTag()}},{key:"_createAdPlayer",value:function(){var A=this;if("no_op"!==this._playback.name){if(r.nextTick(function(){return A._disableControls()}),this._videoMock=!1,this._videoPoster=!1,"video"===this._playback.tagName){var e=this._playback.el&&this._playback.el.src;e&&0!==e.length?"html5_video"!==this._playback.name||this._playback.el.hasAttribute("poster")||(this._playback.el.poster="data:image/svg+xml,"+C["default"],this._videoPoster=!0):(this._playback.el.src=d.MOCK_MP4,this._videoMock=!0)}if(this._forceOverlay||u.Browser.isMobile){var t=function(){var e=function t(e){try{A._clickOverlay.removeEventListener("click",t,!1),e.preventDefault(),e.stopPropagation()}catch(r){}A._clickOverlay.style.display="none",A._playVideoAd()};return A._clickOverlay.addEventListener("click",e,!1),A._clickOverlay.style.display="block",{v:void 0}}();if("object"===("undefined"==typeof t?"undefined":a(t)))return t.v}this._playVideoAd()}}},{key:"_playVideoAd",value:function(){var A=this;(0,B["default"])(this._contentElement,this._adContainer,function(){return A._playVideoContent()})}},{key:"_playVideoContent",value:function(){var A=this;this._videoPoster===!0&&this._playback.$el.attr("poster",null),this._videoMock===!0&&(this._playback.el.src="",this.core.mediaControl.stop()),r.nextTick(function(){A._enableControls(),A.core.mediaControl.play(),console.log("that's it folks!")})}},{key:"_remove",value:function(){this._$adContainer&&this._$adContainer.remove(),this._$clickOverlay&&this._$clickOverlay.remove()}},{key:"render",value:function(){return this._remove(),this._$adContainer=(0,u.$)("<div />").addClass("preroll-container").attr("data-preroll",""),this._$clickOverlay=(0,u.$)("<div />").addClass("preroll-overlay").attr("data-preroll",""),this._$clickOverlay.append(f["default"]).find("svg path").css("fill","#fff"),this._$clickOverlay.find("svg").addClass("preroll-overlay-icon").attr("data-preroll",""),this.$el.append(this._$adContainer),this.$el.append(this._$clickOverlay),this.$el.append(u.Styler.getStyleFor(p["default"])),this._adContainer=this._$adContainer[0],this._clickOverlay=this._$clickOverlay[0],this}},{key:"destroy",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(u.UICorePlugin);e["default"]=m,A.exports=e["default"]}).call(e,t(5))},function(A,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(A,e,t){var r=A.src,o=function n(){A.removeEventListener("ended",n),A.src=r,A.load(),t()};A.src="small.mp4",A.load(),A.addEventListener("ended",o),A.play()},A.exports=e["default"]},function(A,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MOCK_MP4="data:video/mp4;base64, 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"},function(A,e,t){e=A.exports=t(4)(),e.push([A.id,".html5-preroll-plugin[data-preroll]{text-align:left}.html5-preroll-plugin[data-preroll],.html5-preroll-plugin[data-preroll] .preroll-container[data-preroll]{position:absolute;top:0;left:0;width:100%;height:100%}.html5-preroll-plugin[data-preroll] .preroll-overlay[data-preroll]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1337;background-color:#000;cursor:pointer;overflow:hidden;display:none}.html5-preroll-plugin[data-preroll] .preroll-overlay[data-preroll]:hover .preroll-overlay-icon[data-preroll]{opacity:1}.html5-preroll-plugin[data-preroll] .preroll-overlay[data-preroll] .preroll-overlay-icon[data-preroll]{position:relative;width:100%;height:25%;top:50%;transform:translateY(-50%);opacity:.75}",""])},function(A,e){A.exports=function(){var A=[];return A.toString=function(){for(var A=[],e=0;e<this.length;e++){var t=this[e];t[2]?A.push("@media "+t[2]+"{"+t[1]+"}"):A.push(t[1])}return A.join("")},A.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var n=this[o][0];"number"==typeof n&&(r[n]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(t&&!i[2]?i[2]=t:t&&(i[2]="("+i[2]+") and ("+t+")"),A.push(i))}},A}},function(A,e){function t(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(A){if(s===setTimeout)return setTimeout(A,0);if((s===t||!s)&&setTimeout)return s=setTimeout,setTimeout(A,0);try{return s(A,0)}catch(e){try{return s.call(null,A,0)}catch(e){return s.call(this,A,0)}}}function n(A){if(u===clearTimeout)return clearTimeout(A);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(A);try{return u(A)}catch(e){try{return u.call(null,A)}catch(e){return u.call(this,A)}}}function i(){g&&p&&(g=!1,p.length?d=p.concat(d):f=-1,d.length&&l())}function l(){if(!g){var A=o(i);g=!0;for(var e=d.length;e;){for(p=d,d=[];++f<e;)p&&p[f].run();f=-1,e=d.length}p=null,g=!1,n(A)}}function a(A,e){this.fun=A,this.array=e}function c(){}var s,u,h=A.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:t}catch(A){s=t}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(A){u=r}}();var p,d=[],g=!1,f=-1;h.nextTick=function(A){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];d.push(new a(A,e)),1!==d.length||g||o(l)},a.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(A){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(A){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(A,e){A.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'},function(A,e){A.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"><rect x="0" y="0" width="1" height="1" fill="#000000"></rect></svg>'},function(e,t){e.exports=A}])});